# Lande & Kirkpatrick's (1989) model with paternal effects

## how to run?

### Compiling the simulation
Simple, do this:
```
cd src/ibm
make
```
If everything goes OK, there should now be an executable in the `ibm` directory.

### Generating batch files (each line will run a single replicate simulation)
First generate a batch file, each line of which reflects the parameters of
a single replicate simulation. This batch file can be generated by running 
the script `generate_parameters.py`.
In the latter script, you will find all possible parameters to vary. 
Make sure the total number of replicate simulations is not massive at the start. I would strive for a number of say, 40 simulations when testing things out.

```
# generate a batch file called my_batch_file.sh
# first move to the ibm directory
cd src/ibm 

# run the batch file script and store output in my_batch_file.sh
python3 generate_parameters > my_batch_file.sh
```
### Running the batch file
Run all the replicate simulations on a single core sequentially:
```
bash my_batch_file.sh
```

Run all the replicate simulations on `k` cores:
```
cat my_batch_file.sh | tr '\n' '\0' | xargs -0 -Pk -n1 sh -c
```
where `k` should be replaced by the number of cores. So 25 cores would be written as:
```
cat my_batch_file.sh | tr '\n' '\0' | xargs -0 -P25 -n1 sh -c
```
To make sure things keep running when you log off, run everything within GNU `screen`.
